name: base2.py

# زمان‌بندی
on:
  schedule:
    - cron: '*/25 * * * *'  # هر ۵ ساعت اجرا می‌شود
  workflow_dispatch:  # امکان اجرای دستی هم هست

jobs:
  update-base64:
    runs-on: ubuntu-latest

    steps:
      # مرحله 1: کلون کردن ریپو
      - name: Checkout repository
        uses: actions/checkout@v3

      # مرحله 2: ریست کردن پوشه خروجی base64
      - name: Reset base64 output folder
        run: |
          rm -rf base64
          mkdir -p base64
          echo "✅ پوشه base64 ریست شد."

      # مرحله 3: نصب Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      # مرحله 4: نصب کتابخانه‌های مورد نیاز
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests

      # مرحله 5: اجرای base2.py
      - name: Run base2.py
        run: python base2.py
